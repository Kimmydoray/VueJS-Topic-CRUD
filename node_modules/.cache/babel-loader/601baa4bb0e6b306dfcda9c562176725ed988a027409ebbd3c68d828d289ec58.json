{"ast":null,"code":"import \"core-js/modules/es.iterator.constructor.js\";\nimport \"core-js/modules/es.iterator.filter.js\";\nexport default {\n  data() {\n    return {\n      topics: JSON.parse(localStorage.getItem('topics')) || [],\n      expandedTopic: null,\n      currentPage: 1,\n      perPage: 20 // Show 20 topics per page\n    };\n  },\n  computed: {\n    sortedTopics() {\n      return [...this.topics].reverse(); // Sort in descending order\n    },\n    totalPages() {\n      return Math.ceil(this.sortedTopics.length / this.perPage);\n    },\n    paginatedTopics() {\n      const start = (this.currentPage - 1) * this.perPage;\n      return this.sortedTopics.slice(start, start + this.perPage);\n    }\n  },\n  methods: {\n    deleteTopic(guid) {\n      if (confirm(\"Are you sure you want to delete this topic?\")) {\n        this.topics = this.topics.filter(topic => topic.guid !== guid);\n        localStorage.setItem('topics', JSON.stringify(this.topics));\n\n        // Adjust page if deleting the last item on the last page\n        if (this.currentPage > this.totalPages) {\n          this.currentPage = this.totalPages || 1;\n        }\n      }\n    },\n    toggleComments(guid) {\n      this.expandedTopic = this.expandedTopic === guid ? null : guid;\n    },\n    nextPage() {\n      if (this.currentPage < this.totalPages) {\n        this.currentPage++;\n      }\n    },\n    prevPage() {\n      if (this.currentPage > 1) {\n        this.currentPage--;\n      }\n    }\n  }\n};","map":{"version":3,"names":["data","topics","JSON","parse","localStorage","getItem","expandedTopic","currentPage","perPage","computed","sortedTopics","reverse","totalPages","Math","ceil","length","paginatedTopics","start","slice","methods","deleteTopic","guid","confirm","filter","topic","setItem","stringify","toggleComments","nextPage","prevPage"],"sources":["/Applications/MAMP/htdocs/vue-crud-app/src/components/ListTopic.vue"],"sourcesContent":["<template>\n  <div>\n    <h2>All Topics</h2>\n    <router-link to=\"/add\">\n      <button style=\"margin-bottom: 10px;\">Add New Topic</button>\n    </router-link>\n\n    <table border=\"1\">\n      <thead>\n        <tr>\n          <th>GUID</th>\n          <th>Name</th>\n          <th>Action</th>\n        </tr>\n      </thead>\n      <tbody>\n        <template v-for=\"(item) in paginatedTopics\" :key=\"item.guid\">\n          <tr>\n            <td>{{ item.guid }}</td>\n            <td>{{ item.name }}</td>\n            <td>\n              <router-link :to=\"'/edit/' + item.guid\">Edit</router-link>\n              <button @click=\"deleteTopic(item.guid)\" style=\"background: red; color: white; margin-left: 10px;\">\n                Delete\n              </button>\n              <button @click=\"toggleComments(item.guid)\" style=\"margin-left: 10px;\">\n                {{ expandedTopic === item.guid ? 'Hide Comments' : 'View Comments' }}\n              </button>\n            </td>\n          </tr>\n          <tr v-if=\"expandedTopic === item.guid\">\n            <td colspan=\"3\">\n              <ul v-if=\"item.comments && item.comments.length\">\n                <li v-for=\"(comment, i) in item.comments\" :key=\"i\">\n                  <strong>{{ comment.by }}</strong>: {{ comment.comment }} <em>({{ comment.date }})</em>\n                </li>\n              </ul>\n              <p v-else>No comments available.</p>\n            </td>\n          </tr>\n        </template>\n      </tbody>\n    </table>\n\n    <!-- Pagination Controls -->\n    <div style=\"margin-top: 10px;\">\n      <button @click=\"prevPage\" :disabled=\"currentPage === 1\">Previous</button>\n      <span> Page {{ currentPage }} of {{ totalPages }} </span>\n      <button @click=\"nextPage\" :disabled=\"currentPage === totalPages\">Next</button>\n    </div>\n  </div>\n</template>\n\n<script>\nexport default {\n  data() {\n    return {\n      topics: JSON.parse(localStorage.getItem('topics')) || [],\n      expandedTopic: null,\n      currentPage: 1,\n      perPage: 20, // Show 20 topics per page\n    };\n  },\n  computed: {\n    sortedTopics() {\n      return [...this.topics].reverse(); // Sort in descending order\n    },\n    totalPages() {\n      return Math.ceil(this.sortedTopics.length / this.perPage);\n    },\n    paginatedTopics() {\n      const start = (this.currentPage - 1) * this.perPage;\n      return this.sortedTopics.slice(start, start + this.perPage);\n    }\n  },\n  methods: {\n    deleteTopic(guid) {\n      if (confirm(\"Are you sure you want to delete this topic?\")) {\n        this.topics = this.topics.filter(topic => topic.guid !== guid);\n        localStorage.setItem('topics', JSON.stringify(this.topics));\n\n        // Adjust page if deleting the last item on the last page\n        if (this.currentPage > this.totalPages) {\n          this.currentPage = this.totalPages || 1;\n        }\n      }\n    },\n    toggleComments(guid) {\n      this.expandedTopic = this.expandedTopic === guid ? null : guid;\n    },\n    nextPage() {\n      if (this.currentPage < this.totalPages) {\n        this.currentPage++;\n      }\n    },\n    prevPage() {\n      if (this.currentPage > 1) {\n        this.currentPage--;\n      }\n    }\n  }\n};\n</script>\n"],"mappings":";;AAsDA,eAAe;EACbA,IAAIA,CAAA,EAAG;IACL,OAAO;MACLC,MAAM,EAAEC,IAAI,CAACC,KAAK,CAACC,YAAY,CAACC,OAAO,CAAC,QAAQ,CAAC,KAAK,EAAE;MACxDC,aAAa,EAAE,IAAI;MACnBC,WAAW,EAAE,CAAC;MACdC,OAAO,EAAE,EAAE,CAAE;IACf,CAAC;EACH,CAAC;EACDC,QAAQ,EAAE;IACRC,YAAYA,CAAA,EAAG;MACb,OAAO,CAAC,GAAG,IAAI,CAACT,MAAM,CAAC,CAACU,OAAO,CAAC,CAAC,EAAE;IACrC,CAAC;IACDC,UAAUA,CAAA,EAAG;MACX,OAAOC,IAAI,CAACC,IAAI,CAAC,IAAI,CAACJ,YAAY,CAACK,MAAK,GAAI,IAAI,CAACP,OAAO,CAAC;IAC3D,CAAC;IACDQ,eAAeA,CAAA,EAAG;MAChB,MAAMC,KAAI,GAAI,CAAC,IAAI,CAACV,WAAU,GAAI,CAAC,IAAI,IAAI,CAACC,OAAO;MACnD,OAAO,IAAI,CAACE,YAAY,CAACQ,KAAK,CAACD,KAAK,EAAEA,KAAI,GAAI,IAAI,CAACT,OAAO,CAAC;IAC7D;EACF,CAAC;EACDW,OAAO,EAAE;IACPC,WAAWA,CAACC,IAAI,EAAE;MAChB,IAAIC,OAAO,CAAC,6CAA6C,CAAC,EAAE;QAC1D,IAAI,CAACrB,MAAK,GAAI,IAAI,CAACA,MAAM,CAACsB,MAAM,CAACC,KAAI,IAAKA,KAAK,CAACH,IAAG,KAAMA,IAAI,CAAC;QAC9DjB,YAAY,CAACqB,OAAO,CAAC,QAAQ,EAAEvB,IAAI,CAACwB,SAAS,CAAC,IAAI,CAACzB,MAAM,CAAC,CAAC;;QAE3D;QACA,IAAI,IAAI,CAACM,WAAU,GAAI,IAAI,CAACK,UAAU,EAAE;UACtC,IAAI,CAACL,WAAU,GAAI,IAAI,CAACK,UAAS,IAAK,CAAC;QACzC;MACF;IACF,CAAC;IACDe,cAAcA,CAACN,IAAI,EAAE;MACnB,IAAI,CAACf,aAAY,GAAI,IAAI,CAACA,aAAY,KAAMe,IAAG,GAAI,IAAG,GAAIA,IAAI;IAChE,CAAC;IACDO,QAAQA,CAAA,EAAG;MACT,IAAI,IAAI,CAACrB,WAAU,GAAI,IAAI,CAACK,UAAU,EAAE;QACtC,IAAI,CAACL,WAAW,EAAE;MACpB;IACF,CAAC;IACDsB,QAAQA,CAAA,EAAG;MACT,IAAI,IAAI,CAACtB,WAAU,GAAI,CAAC,EAAE;QACxB,IAAI,CAACA,WAAW,EAAE;MACpB;IACF;EACF;AACF,CAAC","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}